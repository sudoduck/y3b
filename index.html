<!DOCTYPE html>
<html lang="en" class=""><head><script>window.livecodes = window.livecodes || {};</script><title>Untitled Project</title><meta name="title" content="Untitled Project"><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="./style.css"><script src="https://cdn.jsdelivr.net/npm/es-module-shims@1.10.0/dist/es-module-shims.js" async=""></script><script type="importmap">{
  "imports": {}
}</script></head><body>


<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LEAKSOUND — Underground Player</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&amp;family=Oswald:wght@300;500;700&amp;display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050407; --panel:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --neon:#8ae6ff; --accent:#ff6b9a; --muted:rgba(255,255,255,0.12);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,Arial; background:
      radial-gradient(1200px 600px at 10% 20%, rgba(140,40,120,0.06), transparent 6%),
      radial-gradient(1000px 400px at 90% 80%, rgba(30,120,200,0.03), transparent 6%),
      var(--bg); color:#e9f7fb; -webkit-font-smoothing:antialiased;
    min-height:100vh; position:relative; padding-bottom:96px; /* space for player */
  }

  /* Film grain overlay */
  body::after{
    content:""; pointer-events:none; position:fixed; inset:0; z-index:1000;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><filter id="n"><feTurbulence baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.02"/></svg>');
    mix-blend-mode:overlay; opacity:0.9;
  }

  header{
    display:flex; align-items:center; gap:18px; padding:18px 28px; position:sticky; top:0; z-index:40;
    background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.15)); border-bottom:1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
  }
  .logo{
    display:flex; gap:12px; align-items:center;
  }
  .badge{
    width:52px; height:52px; border-radius:12px; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg,#071017,#0b0b10);
    box-shadow: 0 10px 40px rgba(24,48,96,0.35), inset 0 -12px 30px rgba(0,0,0,0.6);
    font-weight:900; font-family:Oswald, sans-serif; font-size:20px; color:var(--neon);
    letter-spacing:1px;
  }
  .brandText{line-height:1}
  .brandText .title{font-weight:900; font-family:Oswald, sans-serif; letter-spacing:1px;}
  .brandText .sub{font-size:12px; opacity:0.8; margin-top:2px; color:var(--muted)}

  .search{
    margin-left:24px; flex:1; max-width:700px; position:relative;
  }
  .search input{
    width:100%; padding:12px 16px; border-radius:999px; border:1px solid rgba(255,255,255,0.05);
    background: rgba(255,255,255,0.02); color:inherit; outline:none; font-size:14px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.6);
  }

  .controls{display:flex; gap:10px; align-items:center; margin-left:auto}
  .btn{
    padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--neon); font-weight:700; cursor:pointer;
  }

  /* Layout */
  .wrap{max-width:1200px; margin:28px auto; padding:0 20px; display:grid; grid-template-columns: 1fr 360px; gap:24px; align-items:start;}
  .hero{
    background:var(--panel); padding:22px; border-radius:14px; border:1px solid rgba(255,255,255,0.03); box-shadow: 0 30px 60px rgba(2,6,12,0.6);
    display:flex; gap:18px; align-items:center;
  }
  .heroArt{
    width:220px; height:220px; border-radius:14px; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg,#02030a,#0c0012); font-size:72px; font-weight:900; color:var(--accent);
    box-shadow: 0 20px 50px rgba(8,10,20,0.7);
    border: 1px solid rgba(255,255,255,0.03);
  }
  .heroMeta{flex:1}
  .kicker{font-size:12px; color:var(--neon); font-weight:800; letter-spacing:1px}
  .title{font-size:28px; font-weight:900; margin:8px 0 6px}
  .desc{opacity:0.85; margin-bottom:14px}
  .heroActions{display:flex; gap:12px; align-items:center}
  .btnPlay{background: linear-gradient(90deg, #3be6ff, #6b7dff); color:#041226; padding:12px 18px; border-radius:12px; font-weight:900; border:none; cursor:pointer; box-shadow:0 14px 40px rgba(75,120,255,0.12)}
  .btnGhost{padding:10px 14px; border-radius:10px; background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--neon)}

  /* Library */
  .panel{background:var(--panel); padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,0.03)}
  .panelTitle{font-weight:800; font-size:14px; margin-bottom:12px}
  .grid{display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:14px; margin-top:18px}
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.008));
    padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); cursor:pointer;
    display:flex; gap:12px; align-items:center; transition:transform .15s ease, box-shadow .15s;
  }
  .card:hover{transform:translateY(-6px); box-shadow:0 30px 60px rgba(10,20,40,0.5)}
  .thumb{width:56px; height:56px; border-radius:8px; background:linear-gradient(180deg,#061018,#0b0210); display:flex;align-items:center;justify-content:center; font-weight:900; color:var(--neon)}
  .metaCol{flex:1}
  .name{font-weight:800}
  .sub{font-size:13px; opacity:0.85; margin-top:4px; display:flex; gap:12px; align-items:center}
  .tiny{font-size:12px; opacity:0.7}

  /* mini player at bottom */
  .miniPlayer{
    position:fixed; left:50%; transform:translateX(-50%); bottom:12px; z-index:60;
    width:92%; max-width:1100px; background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.3));
    border-radius:14px; padding:12px 16px; display:flex; gap:12px; align-items:center; border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 30px 60px rgba(0,0,0,0.6);
  }
  .mpInfo{display:flex; gap:12px; align-items:center; min-width:0; flex:1}
  .mpTitle{font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:46vw}
  .mpControls{display:flex; gap:8px; align-items:center}
  .iconBtn{background:transparent; border:1px solid rgba(255,255,255,0.04); padding:8px 10px; border-radius:10px; cursor:pointer; color:var(--neon)}
  .progress{width:100%; height:6px; background:rgba(255,255,255,0.04); border-radius:999px; overflow:hidden}
  .progress > div{height:100%; width:0%; background:linear-gradient(90deg,var(--neon),var(--accent)); border-radius:999px; transition:width .12s linear}

  /* utility */
  .muted{opacity:0.75}
  @media (max-width:980px){ .wrap{grid-template-columns:1fr} .mpTitle{max-width:36vw} .heroArt{display:none} }
</style>



<header>
  <div class="logo">
    <div class="badge">LS</div>
    <div class="brandText">
      <div class="title">LEAKSOUND</div>
      <div class="sub">underground player</div>
    </div>
  </div>

  <div class="search">
    <input id="globalSearch" placeholder="Search leaks, tracks, filenames...">
  </div>

  <div class="controls">
    <button id="refreshBtn" class="btn">Refresh</button>
    <button id="toggleDemo" class="btn">Toggle Featured</button>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <div class="heroArt" id="heroArt">LS</div>
    <div class="heroMeta">
      <div class="kicker">Fresh Leak</div>
      <div class="title" id="heroTitle">Scanning repository...</div>
      <div class="desc" id="heroDesc">Pulling mp3 / mp4 files from GitHub. This site streams raw files directly — for demo only.</div>

      <div class="heroActions">
        <button id="heroPlay" class="btnPlay">Play</button>
        <a id="heroDownload" class="btnGhost" href="#" target="_blank" rel="noreferrer">Download</a>
      </div>

      <div style="margin-top:14px" id="heroPlayerWrap"></div>
    </div>
  </section>

  <aside>
    <div class="panel">
      <div class="panelTitle">Library</div>
      <div id="libraryList" style="max-height:640px; overflow:auto; padding-right:6px"></div>
    </div>
  </aside>

  <section style="grid-column:1/-1; margin-top:18px">
    <div class="panel">
      <div class="panelTitle">All Tracks</div>
      <div id="grid" class="grid">Loading library...</div>
    </div>
  </section>
</main>

<!-- Mini player -->
<div class="miniPlayer" id="miniPlayer" style="display:none">
  <div class="mpInfo">
    <div class="thumb" id="miniThumb">LS</div>
    <div style="min-width:0">
      <div class="mpTitle" id="miniTitle">—</div>
      <div class="tiny muted" id="miniSub">—</div>
      <div style="margin-top:8px" class="progress"><div id="progBar"></div></div>
    </div>
  </div>

  <div class="mpControls">
    <button id="prevBtn" class="iconBtn">⏮</button>
    <button id="playBtn" class="iconBtn">▶</button>
    <button id="nextBtn" class="iconBtn">⏭</button>
    <a id="miniDownload" class="iconBtn" href="#" download="">⬇</a>
  </div>
</div>

<script>
/* ==== CONFIG (change these) ==== */
const GITHUB_USER='sudoduck'; // <-- change
const GITHUB_REPO='y3b';      // <-- change
const BRANCH='main';          // <-- change
/* ============================== */

const searchInput = document.getElementById('globalSearch');
const refreshBtn = document.getElementById('refreshBtn');
const heroTitle = document.getElementById('heroTitle');
const heroDesc  = document.getElementById('heroDesc');
const heroPlay  = document.getElementById('heroPlay');
const heroDownload = document.getElementById('heroDownload');
const heroPlayerWrap = document.getElementById('heroPlayerWrap');
const grid = document.getElementById('grid');
const libraryList = document.getElementById('libraryList');

const miniPlayer = document.getElementById('miniPlayer');
const miniTitle = document.getElementById('miniTitle');
const miniSub = document.getElementById('miniSub');
const progBar = document.getElementById('progBar');
const playBtn = document.getElementById('playBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const miniDownload = document.getElementById('miniDownload');
const miniThumb = document.getElementById('miniThumb');

let library = {};            // grouped tracks
let order = [];              // order of keys
let currentIdx = -1;
let currentAudioEl = null;

/* safe id generator from filename */
function safeId(name){ return name.replace(/[^a-z0-9\-_]/ig,'_'); }

/* fetch files recursively via GitHub contents API */
async function getAllFiles(path=''){
  const url = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/${path}`;
  try{
    const res = await fetch(url);
    if(!res.ok) return [];
    const data = await res.json();
    let out = [];
    for(const it of data){
      if(it.type === 'file'){
        const n = it.name.toLowerCase();
        if(n.endsWith('.mp3') || n.endsWith('.mp4')) out.push(it);
      } else if(it.type === 'dir'){
        const sub = await getAllFiles(it.path);
        out = out.concat(sub);
      }
    }
    return out;
  }catch(e){
    console.error('GitHub fetch error', e);
    return [];
  }
}

function rawUrl(file){ return `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/${BRANCH}/${file.path}`; }

function groupFiles(files){
  const groups = {};
  for(const f of files){
    const base = f.name.replace(/\.(mp3|mp4)$/i,'');
    if(!groups[base]) groups[base] = { name: base, paths: [], mp3:null, mp4:null };
    groups[base].paths.push(f.path);
    if(f.name.toLowerCase().endsWith('.mp3')) groups[base].mp3 = f;
    if(f.name.toLowerCase().endsWith('.mp4')) groups[base].mp4 = f;
  }
  return groups;
}

function addCard(name, item, container){
  const card = document.createElement('div'); card.className='card';
  const thumb = document.createElement('div'); thumb.className='thumb'; thumb.innerText = name[0].toUpperCase();
  const meta = document.createElement('div'); meta.className='metaCol';
  const title = document.createElement('div'); title.className='name'; title.innerText = name;
  const sub = document.createElement('div'); sub.className='sub';
  const tiny = document.createElement('div'); tiny.className='tiny'; tiny.innerText = item.mp3 ? 'audio' : 'video';
  const play = document.createElement('button'); play.className='btnGhost'; play.innerText='Play';
  const dl = document.createElement('a'); dl.className='btnGhost'; dl.innerText='Download'; dl.href = item.mp3 ? rawUrl(item.mp3) : rawUrl(item.mp4); dl.target='_blank';
  play.onclick = () => { playTrackByName(name); };
  sub.appendChild(play); sub.appendChild(dl);
  meta.appendChild(title); meta.appendChild(sub);
  card.appendChild(thumb); card.appendChild(meta);
  card.onclick = (e)=>{ if(e.target===card) playTrackByName(name) }; // click whole card
  container.appendChild(card);
}

function renderLibrary(groups){
  library = groups;
  order = Object.keys(groups).sort((a,b)=> a.localeCompare(b));
  // grid
  grid.innerHTML = '';
  order.forEach(name => addCard(name, groups[name], grid));
  // sidebar list (compact)
  libraryList.innerHTML = '';
  order.slice(0,40).forEach(name=>{
    const el = document.createElement('div'); el.style.padding='8px 6px'; el.style.borderBottom='1px solid rgba(255,255,255,0.02)';
    el.style.display='flex'; el.style.justifyContent='space-between'; el.style.alignItems='center';
    el.innerHTML = `<div style="font-weight:700">${name}</div><div style="font-size:12px;opacity:.8">${groups[name].mp3? 'audio':'video'}</div>`;
    el.onclick = ()=>playTrackByName(name);
    libraryList.appendChild(el);
  });
}

/* play helpers */
function stopCurrent(){
  if(currentAudioEl){
    currentAudioEl.pause();
    currentAudioEl.src=''; // release
    currentAudioEl.remove();
    currentAudioEl = null;
  }
  currentIdx = -1;
  miniPlayer.style.display='none';
  progBar.style.width='0%';
}

function playTrackByName(name){
  const keys = order;
  const idx = keys.indexOf(name);
  if(idx === -1) return;
  playIndex(idx);
}

function createMediaElement(src, isVideo){
  const el = document.createElement(isVideo? 'video' : 'audio');
  el.src = src;
  el.controls = true;
  el.autoplay = true;
  el.style.width = '100%';
  el.style.maxHeight = '320px';
  el.onended = ()=>playNext();
  el.ontimeupdate = ()=> {
    if(el.duration) progBar.style.width = ((el.currentTime / el.duration) * 100) + '%';
  };
  return el;
}

function playIndex(idx){
  if(!order.length) return;
  if(idx < 0) idx = 0;
  if(idx >= order.length) idx = order.length - 1;
  currentIdx = idx;
  const name = order[idx], item = library[name];

  stopCurrent();
  // hero player
  heroPlayerWrap.innerHTML = '';
  if(item.mp4){
    const v = createMediaElement(rawUrl(item.mp4), true);
    heroPlayerWrap.appendChild(v);
    currentAudioEl = v;
  } else if(item.mp3){
    const a = createMediaElement(rawUrl(item.mp3), false);
    heroPlayerWrap.appendChild(a);
    currentAudioEl = a;
  }

  // mini player
  miniPlayer.style.display = 'flex';
  miniTitle.innerText = name;
  miniSub.innerText = item.mp3 ? 'audio • ' + (item.mp3.size ? (Math.round(item.mp3.size/1024/1024*100)/100)+'MB' : '') : (item.mp4 ? 'video' : '');
  miniDownload.href = item.mp3 ? rawUrl(item.mp3) : rawUrl(item.mp4);
  miniDownload.download = name;
  miniThumb.innerText = name[0].toUpperCase();
  playBtn.innerText = '⏸';
  // wire play/pause
  playBtn.onclick = ()=>{
    if(!currentAudioEl) return;
    if(currentAudioEl.paused){ currentAudioEl.play(); playBtn.innerText = '⏸'; }
    else { currentAudioEl.pause(); playBtn.innerText = '▶'; }
  };
}

/* prev/next */
function playPrev(){ if(currentIdx > 0) playIndex(currentIdx - 1); }
function playNext(){ if(currentIdx < order.length - 1) playIndex(currentIdx + 1); }

/* search */
searchInput.addEventListener('input', (e)=>{
  const term = e.target.value.trim().toLowerCase();
  const filtered = order.filter(k => k.toLowerCase().includes(term));
  grid.innerHTML = '';
  filtered.forEach(name => addCard(name, library[name], grid));
});

/* refresh */
refreshBtn.addEventListener('click', init);

prevBtn.onclick = playPrev;
nextBtn.onclick = playNext;

/* hero 'Play' button plays first track */
heroPlay.addEventListener('click', ()=>{
  if(order.length) playIndex(0);
});

/* initial load */
async function init(){
  heroTitle.innerText = 'Scanning repository...';
  heroDesc.innerText = `Pulling mp3 & mp4 from ${GITHUB_USER}/${GITHUB_REPO} (${BRANCH})`;
  grid.innerHTML = 'Searching...';
  const files = await getAllFiles('');
  if(!files.length){
    heroTitle.innerText = 'No leaks found';
    heroDesc.innerText = 'No .mp3 or .mp4 files were detected in the repository.';
    grid.innerHTML = '<div style="padding:18px; color:var(--muted)">No files found.</div>';
    return;
  }
  const groups = groupFiles(files);
  renderLibrary(groups);
  heroTitle.innerText = Object.keys(groups)[0] || 'Library ready';
  heroDesc.innerText = `Found ${Object.keys(groups).length} tracks. Streamed directly from GitHub raw content.`;
  heroDownload.href = Object.values(groups)[0].mp3 ? rawUrl(Object.values(groups)[0].mp3) : (Object.values(groups)[0].mp4 ? rawUrl(Object.values(groups)[0].mp4) : '#');
  // auto-load first item in hero player (but not autoplay in some browsers)
  heroPlay.onclick = ()=> playIndex(0);
}

/* small nicety: click download in hero updates link when library ready */
refreshBtn.addEventListener('click', ()=> heroDesc.innerText = 'Refreshing library...');

/* start */
init();

</script>


<script src="./script.js"></script></body></html>